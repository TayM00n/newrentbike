(this.webpackJsonprentbikes=this.webpackJsonprentbikes||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(18),a=n.n(c),i=n(7),s=n.n(i),o=n(11),l="LOAD_BIKES",u=function(e){return{type:l,bikes:e}},d=n(9),j=n(19),b=n(75),h=n(76),f=n(10),p=n.n(f),m=n(1),x=function(){var e=Object(r.useState)({name:"",type:"Custom",price:1}),t=Object(j.a)(e,2),n=t[0],c=t[1],a=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/createNewBike",Object(d.a)({},n)).then((function(){return window.location.reload(!1)})).catch((function(e){return alert(e.response.data.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"createNewBlock",children:[Object(m.jsx)("div",{children:Object(m.jsx)("h4",{children:"\ud83e\udd11Create new bike"})}),Object(m.jsx)("div",{className:"content ",children:Object(m.jsxs)(b.a,{className:"formContainer row rounded my-3 p-4",children:[Object(m.jsxs)(b.a.Group,{className:"col-md",children:[Object(m.jsx)(b.a.Label,{htmlFor:"bikeName",children:"Bike Name"}),Object(m.jsx)(b.a.Control,{id:"bikeName",type:"text",placeholder:"Name",value:n.name,onChange:function(e){return c(Object(d.a)(Object(d.a)({},n),{},{name:e.target.value}))}})]}),Object(m.jsxs)(b.a.Group,{className:"col-md",children:[Object(m.jsx)(b.a.Label,{htmlFor:"bikeType",children:"Bike Type"}),Object(m.jsx)(b.a.Control,{id:"bikeType",as:"select",onChange:function(e){return c(Object(d.a)(Object(d.a)({},n),{},{type:e.target.value}))},children:["Mountain","Hybrid/Comfort","Road","Triathlon/Time Trial","BMX/Trick","Commuting","Cyclocross","Track Bike/Fixed Gear","Tandem","Adult Trike","Folding","Kids","Beach Cruiser","Recumbent","Custom"].map((function(e,t){return Object(m.jsx)("option",{children:e},t)}))})]}),Object(m.jsxs)(b.a.Group,{className:"col-lg-2",children:[Object(m.jsx)(b.a.Label,{htmlFor:"bikePrice",children:"Rent Price"}),Object(m.jsx)(b.a.Control,{id:"bikePrice",type:"number",placeholder:"0.0$",min:"1",value:n.price,onChange:function(e){return c(Object(d.a)(Object(d.a)({},n),{},{price:e.target.value}))}})]}),Object(m.jsx)(b.a.Group,{className:"d-flex flex-column justify-content-end col-lg-2",children:Object(m.jsx)(h.a,{variant:"success",onClick:a,children:"Create"})})]})})]})},O=n(12),k=Object(O.b)((function(e){return{rentBikes:e.loadBikes.rentBikes,availableBikes:e.loadBikes.availableBikes}}),(function(e){return{loadBikes:function(t){e(u(t))}}}))(x),v=(n(72),n(73),function(e,t){var n=t||0,r=Math.pow(10,n),c=+(n?e*r:e).toFixed(8),a=Math.floor(c),i=c-a,s=i>.5-1e-8&&i<.5+1e-8?a%2==0?a:a+1:Math.round(c);return n?s/r:s}),w=function(e){var t=e.rentBikes,n=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure that you want to cancel rent")){e.next=5;break}return e.next=4,p.a.put("/api/unrentBike",{id:t}).catch((function(e){return alert(e.response.data.message)}));case 4:window.location.reload(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){return t.map((function(e){return Object(m.jsxs)("div",{className:"row my-3 p-4 bg-light rounded",children:[Object(m.jsx)("div",{className:"col-md d-flex flex-column justify-content-center",children:Object(m.jsx)("p",{className:"lead m-0 p-0",children:"".concat(e.name," | ").concat(e.type," | ($").concat(e.price," * ").concat(e.rent_hours,"h) = $").concat(v(e.price*e.rent_hours,3)," ").concat(e.rent_hours>20?"- 50% = $"+v(e.price*e.rent_hours/2,3):"")})}),Object(m.jsx)("div",{className:"col-lg-2",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)(h.a,{variant:"danger",className:"col mx-3",onClick:function(){return n(e._id)},children:"Cancel rent"})})})]},e._id)}))},c=0;return t.forEach((function(e){return e.rent_hours>20?c+=e.price*e.rent_hours/2:c+=e.price*e.rent_hours})),Object(m.jsxs)("div",{className:"listOfRentBikes",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("h4",{children:["\ud83e\udd29Your rent(",t.length,")(Total: $",v(c,3),")"]})}),Object(m.jsx)("div",{children:Object(m.jsx)(r,{})})]})},_=Object(O.b)((function(e){return{rentBikes:e.loadBikes.rentBikes}}))(w),g=n(20),B=n(38),N=n(39),y=n(35),C=function(e){var t=e.availableBikes,n=function(e,t){return e.filter((function(e){return e._id===t})).length>0},c=function(){var e=Object(o.a)(s.a.mark((function e(t,r){var c,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r.length&&n(r,t)){e.next=5;break}return e.next=3,p.a.put("/api/rentBike",{id:t,rent_hours:r[0].rent_hours}).catch((function(e){return alert(e.response.data.message)}));case 3:e.next=23;break;case 5:c=Object(B.a)(r),e.prev=6,c.s();case 8:if((a=c.n()).done){e.next=15;break}if(i=a.value,t!==i._id){e.next=13;break}return e.next=13,p.a.put("/api/rentBike",{id:i._id,rent_hours:i.rent_hours}).catch((function(e){return alert(e.response.data.message)}));case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:window.location.reload(!1);case 24:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure that you want to delete this bike")){e.next=5;break}return e.next=4,p.a.delete("/api/deleteBike",{data:{id:t}}).catch((function(e){return alert(e.response.data.message)}));case 4:window.location.reload(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){for(var e=Object(r.useState)([{_id:0,rent_hours:1}]),i=Object(j.a)(e,2),s=i[0],o=i[1],l=[],u=1;u<=24;u++)l.push(u);return t.map((function(e){return Object(m.jsxs)("div",{className:"row my-3 p-4 bg-light rounded",children:[Object(m.jsx)("div",{className:"col-md-5 d-flex flex-column justify-content-center",children:Object(m.jsx)("p",{className:"lead m-0 p-0",children:"".concat(e.name," | ").concat(e.type," | $").concat(e.price)})}),Object(m.jsx)("div",{className:"col d-flex flex-column justify-content-center",children:Object(m.jsxs)("div",{className:"row p-2 border rounded my-1",children:[Object(m.jsx)(N.a,{className:"col my-auto",children:"Rent time"}),Object(m.jsx)(y.a,{as:"select",className:"col-lg my-auto",onChange:function(t){return function(e,t){s.forEach((function(r){s.length>1?r._id===e?r.rent_hours=+t.target.value:0===r._id||n(s,e)||o([].concat(Object(g.a)(s),[{_id:e,rent_hours:+t.target.value}])):o([].concat(Object(g.a)(s),[{_id:e,rent_hours:+t.target.value}]))}))}(e._id,t)},children:l.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},e)}))})]})}),Object(m.jsx)("div",{className:"col-md-4 d-flex flex-column justify-content-center",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)(h.a,{variant:"primary",className:"col mx-3",onClick:function(){return c(e._id,Object(g.a)(s))},children:"Rent"}),Object(m.jsx)(h.a,{variant:"danger",className:"col mx-3",onClick:function(){return a(e._id)},children:"Delete"})]})})]},e._id)}))};return Object(m.jsxs)("div",{className:"listOfRentBikes",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("h4",{children:["\ud83d\udeb2Available Bikes(",t.length,")"]})}),Object(m.jsx)("div",{children:Object(m.jsx)(i,{})})]})},T=Object(O.b)((function(e){return{availableBikes:e.loadBikes.availableBikes}}))(C);var E=function(e){var t=e.dispatch,n=function(){var e=Object(o.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()("/api/bikes").catch((function(e){return alert(e.response.data.message)}));case 3:return n=e.sent,e.next=6,n.data.bikes;case 6:r=e.sent,t(u(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n()})),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Awesome Bike Rental"})}),Object(m.jsx)(k,{}),Object(m.jsx)(_,{}),Object(m.jsx)(T,{})]})},R=n(15),A={rentBikes:[],availableBikes:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(d.a)(Object(d.a)({},e),{},{rentBikes:t.bikes.filter((function(e){return!0===e.isRent})),availableBikes:t.bikes.filter((function(e){return!0!==e.isRent}))});default:return e}},D=Object(R.b)({loadBikes:S}),F=Object(R.c)(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(m.jsx)(O.a,{store:F,children:Object(m.jsx)(E,{dispatch:F.dispatch})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.6dbc554f.chunk.js.map